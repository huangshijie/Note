# ALI

补充：转载自 https://kd.youth.cn/article/s?uid=6552956&app_version=1.2.3&sid=1102171&time=1523203767&signature=3NRxPz8j0mdBYbOGDW91lZB9zTXg0xE7yAXV56qwogJEpkLK2e&sign=e16778ec7cbf04ac3d572c20cf01aa20

3、什么是多线程中的上下文切换？
多线程会共同使用一组计算机上的CPU，而线程数大于给程序分配的CPU数量时，为了让各个线程都有执行的机会，就需要轮转使用CPU。不同的线程切换使用CPU发生的切换数据等就是上下文切换。

4、死锁与活锁的区别，死锁与饥饿的区别？
死锁：是指两个或两个以上的进程（或线程）在执行过程中，因争夺资源而造成的一种互相等待的现象，若无外力作用，它们都将无法推进下去。 
产生死锁的必要条件：

- 互斥条件：所谓互斥就是进程在某一时间内独占资源。
- 请求与保持条件：一个进程因请求资源而阻塞时，对已获得的资源保持不放。 
- 不剥夺条件:进程已获得资源，在末使用完之前，不能强行剥夺。  
- 循环等待条件:若干进程之间形成一种头尾相接的循环等待资源关系。

活锁：任务或者执行者没有被阻塞，由于某些条件没有满足，导致一直重复尝试，失败，尝试，失败。

活锁和死锁的区别在于，处于活锁的实体是在不断的改变状态，所谓的“活”， 而处于死锁的实体表现为等待；活锁有可能自行解开，死锁则不能。

饥饿：一个或者多个线程因为种种原因无法获得所需要的资源，导致一直无法执行的状态。 
Java中导致饥饿的原因： 高优先级线程吞噬所有的低优先级线程的CPU时间。 线程被永久堵塞在一个等待进入同步块的状态，因为其他线程总是能在它之前持续地对该同步块进行访问。 线程在等待一个本身也处于永久等待完成的对象(比如调用这个对象的wait方法)，因为其他线程总是被持续地获得唤醒。

5、Java中用到的线程调度算法是什么？

采用时间片轮转的方式。可以设置线程的优先级，会映射到下层的系统上面的优先级上，如非特别需要，尽量不要用，防止线程饥饿。

6、什么是线程组，为什么在Java中不推荐使用？

7、为什么使用Executor框架？

8、在Java中Executor和Executors的区别？

9、什么是原子操作？在Java Concurrency API中有哪些原子类(atomic classes)？

10、Java Concurrency API中的Lock接口(Lock interface)是什么？对比同步它有什么优势？

11、什么是Executors框架？

12、什么是阻塞队列？阻塞队列的实现原理是什么？如何使用阻塞队列来实现生产者-消费者模型？

13、什么是Callable和Future?

14、什么是FutureTask?使用ExecutorService启动任务。

15、什么是并发容器的实现？

16、多线程同步和互斥有几种实现方法，都是什么？

17、什么是竞争条件？你怎样发现和解决竞争？

18、你将如何使用thread dump？你将如何分析Thread dump？

19、为什么我们调用start()方法时会执行run()方法，为什么我们不能直接调用run()方法？

20、Java中你怎样唤醒一个阻塞的线程？

21、在Java中CycliBarriar和CountdownLatch有什么区别？

22、什么是不可变对象，它对写并发应用有什么帮助？

23、什么是多线程中的上下文切换？

24、Java中用到的线程调度算法是什么？

25、什么是线程组，为什么在Java中不推荐使用？

26、为什么使用Executor框架比使用应用创建和管理线程好？

27、java中有几种方法可以实现一个线程？

28、如何停止一个正在运行的线程？

29、notify()和notifyAll()有什么区别？

30、什么是Daemon线程？它有什么意义？

31、java如何实现多线程之间的通讯和协作？

32、什么是可重入锁（ReentrantLock）？

33、当一个线程进入某个对象的一个synchronized的实例方法后，其它线程是否可进入此对象的其它方法？

```word
不能，也得获得该实例的锁。
```

34、乐观锁和悲观锁的理解及如何实现，有哪些实现方式？

35、SynchronizedMap和ConcurrentHashMap有什么区别？

36、CopyOnWriteArrayList可以用于什么应用场景？

37、什么叫线程安全？servlet是线程安全吗?

38、volatile有什么用？能否用一句话说明下volatile的应用场景？

39、为什么代码会重排序？

40、在java中wait和sleep方法的不同？

41、一个线程运行时发生异常会怎样？

42、如何在两个线程间共享数据？

43、Java中notify 和 notifyAll有什么区别？

44、为什么wait, notify 和 notifyAll这些方法不在thread类里面？

45、什么是ThreadLocal变量？

46、Java中interrupted 和 isInterrupted方法的区别？

47、为什么wait和notify方法要在同步块中调用？

48、为什么你应该在循环中检查等待条件?

49、Java中的同步集合与并发集合有什么区别？

50、什么是线程池？ 为什么要使用它？

51、怎么检测一个线程是否拥有锁？

52、你如何在Java中获取线程堆栈？

53、JVM中哪个参数是用来控制线程的栈堆栈小的?

54、Thread类中的yield方法有什么作用？

55、Java中ConcurrentHashMap的并发度是什么？

56、Java中Semaphore是什么？

57、Java线程池中submit() 和 execute()方法有什么区别？

58、什么是阻塞式方法？

59、Java中的ReadWriteLock是什么？

60、volatile 变量和 atomic 变量有什么不同？

61、可以直接调用Thread类的run ()方法么？

62、如何让正在运行的线程暂停一段时间？

63、你对线程优先级的理解是什么？

64、什么是线程调度器(Thread Scheduler)和时间分片(Time Slicing )？

65、你如何确保main()方法所在的线程是Java 程序最后结束的线程？

66、线程之间是如何通信的？

67、为什么线程通信的方法wait(), notify()和notifyAll()被定义在Object 类里？

68、为什么wait(), notify()和notifyAll ()必须在同步方法或者同步块中被调用？

69、为什么Thread类的sleep()和yield ()方法是静态的？

70、如何确保线程安全？

71、同步方法和同步块，哪个是更好的选择？

72、如何创建守护线程？

73、什么是Java Timer 类？如何创建一个有特定时间间隔的任务？

举几个例子

比如考察Java类加载相关问题：
什么是类加载？
双亲委派是什么？
为什么要双亲委派？
如何破坏双亲委派？
为什么要破坏双亲委派？
修改类加载策略要复写哪个方法？
知道模块化吗？
知道Java9的模块化技术吗？
jigsaw，jboss modules和osgi的区别？
ClassNotFound怎么回事？
如何解决ClassNotFound？
ClassNotFoundException和NoClassDefFoundErr区别？
比如考察计算机网络相关问题，一般从tcp/ip入手：
OSI七层协议？
三次握手？四次关闭？
为什么要三次握手，两次或者四次行不行？
Tcp和Udp区别？
粘包和拆包？
一次网络请求全过程？
什么是DNS？
负载均衡？
CDN？
页面响应慢如何排查？
SESSION？
SESSION和cookie区别？
没有cookie如何实现SESSION？
SESSION有没有限制？有限制怎么办？
代理和反向代理？  

----------------------------------------------------------------
除了以上的情况外，还有一种聪明的面试官，从一个开放性的问题下手： 能简单介绍下您现在所做项目和过程中的技术难点或有遇到瓶颈吗?

下面就是一个面试官和面试者都比较优秀的情况下，一场关于分布式相关的高质量面试现场。

这种问题直接回答高并发分布式场景的数据一致性问题。（参考：关于分布式一致性的探究）  
然后面试官问：如何解决的呢。
答：在并发方面考虑了乐观锁和分布式锁。在一致性方面不同场景使用了不同策略。
问：介绍下乐观锁
答：乐观锁巴拉巴拉（参考：深入理解乐观锁与悲观锁）  
问：分布式锁如何实现
答：基于数据库，基于缓存，基于zk三种。然后再把三种方案的优缺点说清楚。（参考：分布式锁的多种实现方式~）  
问：关于缓存和ZK了解多少
答：常用缓存，redis，memcached等。当然还可以说memcached容易被总来做DDOS攻击（参考：GitHub遭受的DDoS攻击到底是个什么鬼？）。ZK就简单介绍下原理，常用场景等。（参考：Zookeeper介绍（四）——Zookeeper中的基本概念）  
问：数据一致性怎么保证
答：先扯一段CAP和BASE（参考：分布式的CAP理论<  和   ），再说说2PC，3PC（参考：深入理解分布式系统的2PC和3PC）以及有啥缺点，过度目前常用的策略。比如最大努力通知，可靠消息最终一致性。TCC分布式事务等。在说下业务场景都有哪几个。  最终是如何选择的。最后再说一句：当然，数据一致性的最后一道防线还是人工介入。要做好数据对账，实时数据检验以及报警。保证可以及时发现线上问题。

并发编程：
什么是多线程并发和并行？
什么是线程安全问题？
什么是共享变量的内存可见性问题？
什么是Java中原子性操作？
什么是Java中的CAS操作,AtomicLong实现原理？
什么是Java指令重排序？
Java中Synchronized关键字的内存语义是什么？
Java中Volatile关键字的内存语义是什么？
什么是伪共享,为何会出现，以及如何避免？
什么是可重入锁、乐观锁、悲观锁、公平锁、非公平锁、独占锁、共享锁？
讲讲ThreadLocal 的实现原理？
ThreadLocal 作为变量的线程隔离方式，其内部是如何做的？
说说InheritableThreadLocal 的实现原理？
InheritableThreadLocal 是如何弥补 ThreadLocal 不支持继承的特性？
CyclicBarrier内部的实现与 CountDownLatch 有何不同？
随机数生成器 Random 类如何使用 CAS 算法保证多线程下新种子的唯一性？
ThreadLocalRandom 是如何利用 ThreadLocal 的原理来解决 Random 的局限性？
Spring 框架中如何使用 ThreadLocal 实现 request scope 作用域 Bean？
并发包中锁的实现底层（对AQS的理解）？
讲讲独占锁 ReentrantLock 原理？
谈谈读写锁 ReentrantReadWriteLock 原理？
StampedLock 锁原理的理解？
谈下对基于链表的非阻塞无界队列 ConcurrentLinkedQueue 原理的理解？
ConcurrentLinkedQueue 内部是如何使用 CAS 非阻塞算法来保证多线程下入队出队操作的线程安全？
基于链表的阻塞队列 LinkedBlockingQueue 原理。阻塞队列LinkedBlockingQueue 内部是如何使用两个独占锁 ReentrantLock 以及对应的条件变量保证多线程先入队出队操作的线程安全？
分析下JUC 中倒数计数器 CountDownLatch 的使用与原理？
CountDownLatch 与线程的 Join 方法区别是什么？
讲讲对JUC 中回环屏障 CyclicBarrier 的使用？
CyclicBarrier内部的实现与 CountDownLatch 有何不同？
Semaphore 的内部实现是怎样的？
并发组件CopyOnWriteArrayList 是如何通过写时拷贝实现并发安全的 List？
JVMJava 内存分配？
Java 堆的结构是什么样子的？
什么是堆中的永久代（Perm Gen space）?说说各个区域的作用？
Java 中会存在内存泄漏吗，简述一下？
Java 类加载过程？
描述一下 JVM 加载 Class 文件的原理机制?
什么是类加载器？
类加载器有哪些？
什么是tomcat类加载机制？
类加载器双亲委派模型机制？
什么是GC? 为什么要有 GC？
简述一下Java 垃圾回收机制？
如何判断一个对象是否存活？
垃圾回收的优点和原理，并考虑 2 种回收机制？
垃圾回收器的基本原理是什么？
垃圾回收器可以马上回收内存吗？
有什么办法主动通知虚拟机进行垃圾回收？
深拷贝和浅拷贝？
System.gc() 和 Runtime.gc() 会做些什么？
什么是分布式垃圾回收（DGC）？
它是如何工作的？
串行（serial）收集器和吞吐量（throughput）收集器的区别是什么？
在 Java 中，对象什么时候可以被垃圾回收？
简述Minor GC 和 Major GC？
Java 中垃圾收集的方法有哪些？
讲讲你理解的性能评价及测试指标？
常用的性能优化方式有哪些？
说说分布式缓存和一致性哈希？
同步与异步？阻塞与非阻塞？
什么是GC调优？
常见异步的手段有哪些？
Spring为什么需要代理模式？
讲讲静态代理模式的优点及其瓶颈？
对Java 接口代理模式的实现原理的理解？
如何使用 Java 反射实现动态代理？
Java 接口代理模式的指定增强？
谈谈对Cglib 类增强动态代理的实现？
怎么理解面向切面编程的切面？
讲解OOP与AOP的简单对比？
讲解JDK 动态代理和 CGLIB 代理原理以及区别？
讲解Spring 框架中基于 Schema 的 AOP 实现原理？
讲解Spring 框架中如何基于 AOP 实现的事务管理？
谈谈对控制反转的设计思想的理解？
怎么理解 Spring IOC 容器？
Spring IOC 怎么管理 Bean 之间的依赖关系，怎么避免循环依赖？
对Spring IOC 容器的依赖注入的理解？
说说对Spring IOC 的单例模式和高级特性？
BeanFactory 和 FactoryBean 有什么区别？
BeanFactory 和 ApplicationContext 又有什么不同？
Spring 在 Bean 创建过程中是如何解决循环依赖的？
谈谈Spring Bean 创建过程中的设计模式？
数据库MySQL 有哪些存储引擎啊？都有什么区别？
Float、Decimal 存储金额的区别？
Datetime、Timestamp 存储时间的区别？
Char、Varchar、Varbinary 存储字符的区别？
对比一下B+树索引和 Hash索引？
MySQL索引类型有？
如何管理 MySQL索引？
对Explain参数及重要参数的理解？
索引利弊是什么及索引分类？
聚簇索引和非聚簇索引的区别？
B+tree 如何进行优化？
索引遵循哪些原则？
索引与锁有什么关系？
还有什么其他的索引类型，各自索引有哪些优缺点？
谈谈对Innodb事务的理解？
说说数据库事务特点及潜在问题？
什么是MySQL隔离级别？
有多少种事务失效的场景，如何解决？
一致性非锁定读和一致性锁定读是什么？
Innodb如何解决幻读？
讲讲Innodb行锁？
死锁及监控是什么？
自增长与锁 ，锁的算法，锁问题，锁升级是什么？
乐观锁的线程如何做失败补偿？
高并发场景（领红包）如何防止死锁，保证数据一致性？
谈谈MySQL的锁并发？
查询优化的基本思路是什么？
说说MySQL读写分离、分库分表？
表结构对性能有什么影响?浅谈索引优化？
说说Sql优化的几点原则？
MySQL表设计及规范？
说说MySQL几种存储引擎应用场景？
MySQL常用优化方式有哪些？
MySQL常用监控？
MySQL瓶颈分析？
缓存redis数据结构有哪些？
Redis缓存穿透，缓存雪崩？
如何使用Redis来实现分布式锁？
Redis的并发竞争问题如何解决？
Redis持久化的几种方式，优缺点是什么，怎么实现的？
Redis的缓存失效策略？
Redis集群，高可用，原理？
Redis缓存分片？
Redis的数据淘汰策略？
redis队列应用场景？
分布式使用场景（储存session）？
网络编程TCP建立连接和断开连接的过程？
HTTP协议的交互流程，HTTP和HTTPS的差异，SSL的交互流程？
TCP的滑动窗口协议有什么用？
HTTP协议都有哪些方法？
Socket交互的基本流程？
讲讲tcp协议（建连过程，慢启动，滑动窗口，七层模型）？
webservice协议（wsdl/soap格式，与restt办议的区别）？
说说Netty线程模型，什么是零拷贝？
TCP三次握手、四次挥手？
DNS解析过程？
TCP如何保证数据的可靠传输的？
分布式什么是CAP定理？
说说CAP理论和BASE理论？
什么是最终一致性？
最终一致性实现方式？
什么是一致性Hash？
讲讲分布式事务？
如何实现分布式锁？
如何实现分布式 Session?
如何保证消息的一致性?
负载均衡的理解？
正向代理和反向代理？
CDN实现原理？
怎么提升系统的QPS和吞吐？
Dubbo的底层实现原理和机制？
描述一个服务从发布到被消费的详细过程？
分布式系统怎么做服务治理？
消息中间件如何解决消息丢失问题？
Dubbo的服务请求失败怎么处理？
对分布式事务的理解？
如何实现负载均衡,有哪些算法可以实现?
Zookeeper的用途,选举的原理是什么?
讲讲数据的垂直拆分水平拆分？
zookeeper原理和适用场景？
zookeeper watch机制？
redis/zk节点宕机如何处理？
分布式集群下如何做到唯一序列号？
用过哪些MQ,怎么用的,和其他mq比较有什么优缺点,MQ的连接是线程安全的吗？
MQ系统的数据如何保证不丢失？列举出能想到的数据库分库分表策略？

一、JVM与性能优化

描述一下 JVM 加载 Class 文件的原理机制?
什么是类加载器？
类加载器有哪些？
什么是tomcat类加载机制？
类加载器双亲委派模型机制？
Java 内存分配？
Java 堆的结构是什么样子的？
简述各个版本内存区域的变化？
说说各个区域的作用？
Java 中会存在内存泄漏吗，简述一下？
Java 类加载过程？
什么是GC? 为什么要有 GC？
简述一下Java 垃圾回收机制？
如何判断一个对象是否存活？
垃圾回收的优点和原理，并考虑 2 种回收机制？基本原理是什么？
深拷贝和浅拷贝？
什么是分布式垃圾回收（DGC）？它是如何工作的？
在 Java 中，对象什么时候可以被垃圾回收？
简述Minor GC 和 Major GC？
Java 中垃圾收集的方法有哪些？
讲讲你理解的性能评价及测试指标？
常用的性能优化方式有哪些？
说说分布式缓存和一致性哈希？
什么是GC调优？
二、Redis

redis数据结构有哪些？
Redis缓存穿透，缓存雪崩？
如何使用Redis来实现分布式锁？
Redis的并发竞争问题如何解决？
Redis持久化的几种方式，优缺点是什么，怎么实现的？
Redis的缓存失效策略？
Redis集群，高可用，原理？
Redis缓存分片？
Redis的数据淘汰策略？
redis队列应用场景？
分布式使用场景（储存session）？
三、网络编程

TCP建立连接和断开连接的过程？
HTTP协议的交互流程• HTTP和HTTPS的差异，SSL的交互流程？
TCP的滑动窗口协议有什么用？
HTTP协议都有哪些方法？
Socket交互的基本流程？
讲讲tcp协议（建连过程，慢启动，滑动窗口，七层模型）？
webservice协议（wsdl/soap格式，与restt办议的区别）？
说说Netty线程模型，什么是零拷贝？
TCP三次握手、四次挥手？
DNS解析过程？
TCP如何保证数据的可靠传输的？
四、设计模式与重构

说说几个常见的设计模式（23种设计模式）？
设计一个工厂的包的时候会遵循哪些原则?
列举一个使用了 Visitor/ Decorator模式的开源项目/库?
如何实现一个单例?
代理模式(动态代理)？
单例模式(懒汉模式,恶汉模式,并发初始化如何解决, volatile与lock的使用)？
JDK源码里面都有些什么让你印象深刻的设计模式使用,举例看看?
五、分布式

什么是CAP定理？
说说CAP理论和BASE理论？
什么是最终一致性？最终一致性实现方式？
什么是一致性Hash？
讲讲分布式事务？
如何实现分布式锁？
如何实现分布式 Session?
如何保证消息的一致性?
负载均衡的理解？
正向代理和反向代理？
CDN实现原理？
怎么提升系统的QPS和吞吐？
Dubbo的底层实现原理和机制？
描述一个服务从发布到被消费的详细过程？
分布式系统怎么做服务治理？
消息中间件如何解决消息丢失问题？
Dubbo的服务请求失败怎么处理？
对分布式事务的理解？
如何实现负载均衡,有哪些算法可以实现?
Zookeeper的用途,选举的原理是什么?
讲讲数据的垂直拆分水平拆分？
zookeeper原理和适用场景？
zookeeper watch机制？
redis/zk节点宕机如何处理？
分布式集群下如何做到唯一序列号？
用过哪些MQ,怎么用的,和其他mq比较有什么优缺点,MQ的连接是线程安全的吗？
MQ系统的数据如何保证不丢失？
列举出能想到的数据库分库分表策略？

线程部分

1、多线程的实现方式有哪些？
这个题目在一面的时候基本上都会碰到吧，继承 Thread 类、实现Runnable 接口，最后调用 的是 start() 方法来启动线程。这里还有个知识点是 start() 跟 run() 方法的区别和联系。直接调用 start() 方法，此时线程处于一个就绪（可运行）的状态，但是并没有真正的运行。而是得到CPU 的时间片后，开始执行 run() 方法，run() 方法里面的是我们的线程体。我们直接 运行 run() 方法，它其实就是一个普通的方法调用，在主线程中执行，是不会开启多线程的。

2、描述一些线程死锁的情况？这个问题在平常项目基本上没怎么接触到，但是我有过部分了解。回答的是： 两个线程在持有自己的锁的时候，还要去持有对方持有的锁时，由于别人的锁已经被对方持有，造成彼此等待对方释放锁的情况。回答得比较片面，还有一些类型的死锁问题没有答出来，后面直接交底了，面试官说没关系的。建议大家在准备这个问题的时候能说出来产生死锁的条件、现象、解决办法等。然后配上一些实例说明，在面试过程中，面试官就提到说根据我们平常遇到死锁问题的场景实例来说。大家可以搜一下下面这两个死锁场景问题：
1、三个人 三根筷子：每个人需要拿到身边的两根筷子才能开始吃饭
2、银行转账问题：线程 A 从 X 账户向 Y 账户转账，线程 B 从账户 Y 向账户 X 转账，那么就会发生死锁。
3、项目中有没有用过线程池 ？怎么用的 ？回答了我们项目里面有些接口需要组装多个服务的数据进行封装，然后返回。这里面我们会使用多线程去并行拉取数据，减少接口响应时间。面试官说：“ok，那么你有没有看过线程池里面的源码呢 ？有哪几种线程池 ？”源码这里我迟疑了一下，我说不太熟，然后我说了几种类型的线程池 newSingleThreadExecutor、newFixedThreadPool、newCachedThreadPool但是还漏了一种 newScheduledThreadPool 没想起来。
4、线程池的原理是什么样子？底层方法的参数分别是什么意思？回答这个问题的时候，当时我卡住了。我知道这几个底层都是对 调用的 ThreadPoolExecutor ，但是我死活没有想起来名字，这时候面试官提醒了一下，然后说没关系的。接着就问：“那你知道他的参数都有哪些吗 ？都分别代表什么意思吗 ？”我回答的是 有个 线程的个数 和 线程存活的时间，其他的没说上来。然后面试官说：“没关系的”。补充一下：线程池底层都是通过 ThreadPoolExecutor 来实现的。public ThreadPoolExecutor( int corePoolSize, int maximumPoolSize, long keepAliveTime, TimeUnit unit,BlockingQueue<Runnable> workQueue, ThreadFactory threadFactory, RejectedExecutionHandler handler)几个参数的意思分别为：corePoolSize： 线程池里最小线程数maximumPoolSize：线程池里最大线程数量，超过最大线程时候会使用 RejectedExecutionHandlerkeepAliveTime：线程最大的存活时间，超过这个时间就会被回收unit：线程最大的存活时间的单位workQueue：缓存需要执行的异步任务的队列threadFactory：新建线程工厂handler：拒绝策略，表示当workQueue已满，且池中的线程数达到maximumPoolSize时，线程池拒绝添加新任务时采取的策略。DiscardPolicy：抛弃当前任务，DiscardOldestPolicy：扔掉最旧的，CallerRunsPolicy：由向线程池提交任务的线程来执行该任务，AbortPolicy：抛出 RejectedExecutionException 异常。问到这里，我回答的确实太有限，面试官就没有再细问了，还是说：“没关系的”。如果你这里答出来了，那么我认为你还需要掌握的是，这几种线程池在哪些情况下使用什么类型的，以及要注意什么问题，很大可能面试官会继续深挖。这里就不给出答案了，我相信你自己去搜一下，体会会更深刻些。MyBatis 部分5、mybatis 的 $ 与 # 的区别？回答：他们两都可以来传递参数，不过 # 可以方式 sql 注入，而 $ 就是字符串拼接的方式处理，可能会有sql 注入的问题。上面还有一个关键的点没有答出来，那就是 #{} 在预处理时，会把参数部分用一个占位符 ? 代替 ，变成了如下的 sql 语句：select * from user where name = ?;而 ${} 则只是简单的字符串拼接，在动态解析阶段就直接拼接成了 最终的sql 语句：select * from user where name = 'zhouq';
6、$ 跟 # 的使用场景 ？这个问题我没有怎么理解得到，然后回答的就是 $ 在拼接表名的时候用，其他时候传递参数值的时候用 #。
7、mybatis 的 dao 接口跟 xml 文件里面的sql 是如何建立关系的？这里问到的时候比较蒙圈，然后回答的是：mybatis 会先解析这些xml 文件，xml 文件里面有命名空间 （namespace），这里可以跟dao 建立关系，然后 xml 中的每段 sql 会有一个id 跟 dao 中的接口进行关联。。。然后面试官说: "如果 我有两个这个xml 文件 都跟这个dao 建立关系了，那不是就是冲突了？",然后，我认怂了。我上面的回答太笼统，肯定是有问题的，建议你好好去了解一下mybatis 的原理。mybatis 到这里就没了。数据库先问的是，你平常使用得做多的是什么数据库，当然了，mysql 。
8、mysql 锁机制 ？面试官问的是，你了解mysql 的锁机制么？我就只答出来一个行锁。然后其他的没想起，就认了，其他的忘记了。建议你去了解了解还有表锁、页面锁 等等。
9、排它锁 & 共享锁你了解吗 ？这个地方我想了一会，说平时了解得不多。实时上，平常我们的小业务系统基本上没有用到这些，可能有用到的地方，也没有去在意吧。接着，面试官说了下面这个场景题，然后让出解决方案。10、场景问题：在A线程处理一条数据，比如扣款，或者是更新状态时候，其他的线程比如 B 需要对它进行阻塞，不能够再对这条数据进行操作，包括查询也不行，得等A 线程处理完成以后，B才能进行处理。A 跟 B 是同样的业务代码产生的，非不同的业务。要使用数据库的锁来实现，怎么实现 ？问这个问题的时候，面试官很耐心的解释了这个场景，然后问我有没有想起点什么来？其实就是想考察上面的关于数据库锁的问题。
11、mysql 索引是怎么实现的？回答的是 B+ 树，接着面试官继续问：“能否大致描述一下 B+ 树的大致结构 ？”。这块内容没怎么了解，直接认怂了。缓存相关这块内容是我项目上写得有使用了多级缓存的方案，然后面试官就这一块问了下面的这些关于使用缓存可能会遇到的问题。
12、缓存击穿、缓存穿透 、缓存雪崩 ？
13、热点数据失效怎么解决？这两个问题，以前好好了解过，但是没整理成自己的东西，面试的时候也说得云里雾里。
14、先删缓存还是先更新数据库，为什么？这里我说的：是先删缓存，然后再更新数据库，但这是错误的，这里有非常大的问题。想想这样一个场景：如果一个线程 A 先把缓存删除了,然后去更新数据库，那么在它删了缓存还没有更新到数据库的这个中间时间，线程B进来了，发现缓存没有，就去读库，这时候还是读取还是旧的数据，然后又更新到缓存去了。此时A 才把新数据写到数据库。此时就产生了一个典型的问题就是“双写不一致”。关于这块问题的讨论：《缓存更新的套路》-陈皓老师kafka15、kafka 的架构，包含了哪些角色？这个问题我开始不知道怎么回答，就说了个 Broker，然后面试官提醒了一下：“不是我们平常还有生产者，消费呀什么的吗 ？”额，我说还有生产者、消费者、主题呀等等。这过程中面试官还提到说平常我们在搭建的时候要配置写什么东西呀等等，按照官网的介绍说也行。这里还有其他的比如Partition、消费者组、还有一个主要的 就是 zk 了。这里建议大家好好的把 kafka 里面的这些概念、属于、架构图好好自己画一下。不然真是关键时候真说不出来，但是他一提你又明白。这样子肯定是不行的，面试是你说，不是面试官说。
16、kafka 的最小工作单元？这个问题问得也是蒙圈，其实就是说我们在写代码的时候，要用kafka的时候。我们需要使用那些最基础的组件，比如生产者、消费者、主题、偏移量 等等。这个问题如果你们遇到，最好向面试官问清楚。
17、kafka 消息重复消费的问题？幂等怎么做的？刚开始面试官说，你知道kafka 消息重复的问题吗？有没遇到。我回答的是，会存在消息重复消费的问题。我们在消费数据这端做了幂等处理来解决。然后面试官继续才问的是：幂等怎么来做的， 我说通过设置数据版本号，还有数据库唯一索引等等。面试官：“ok”。这个问题，如果你能告诉面试官产生重复消费的情况，比如说投递的时候重复了，消费的时候由于 offset 没处理好等等问题导致的话，我想可能会更好。
18、kafka ack 机制？集群中的ack 是怎么实现的？这里我只回答上了 ack 机制是啥，但是实现原理没有回答上来。

Redis
19、Redis 中有哪些数据结构平常使用得最多的是 String , 还有 List 、Hash、Set、ZSet 。没有再问其他的内容。但是像Redis 为什么这么快这种问题，我认为你应该要去了解，其他小伙伴经常遇到。也就是多路复用是个什么玩意儿？

源码
20、这里面试官问 你平常有没有看过一些源码？框架的也行？JDK 的也行。然后我说看了 HashMap 的源码,然后就巴拉巴拉的说了一哈大体的 put、get 流程 ，它的结构是什么样子的。这过程中还问到了 怎么判断两个对象是否相等？也就是 == 和 equals 的知识点。其他的就没再继续问了。到这里整个电面过程结束了，说
10个工作日内会给我答复此次面试情况。整个过程大概持续了40分钟的样子。我知道，凉凉。最后总结一下上面的模块虽然顺序有变化，但是每个大块里面的问题都是按照顺序来的，基本上都是由浅入深、循序渐进的来问。像数据库锁、线程池、缓存问题 这些内容几乎都是那种连环炮的形式，直到摸到你的底。通过这次面试，亲身体会到了差距。不过，更有方向了。告诫大家一点东西：平常多积累输出：输出或者教会别人是最好的学习方式，光看不练，几天就忘。先深后广：深入学习，而不是只停留在使用API 的层面，一块一块系统的深入了解，再去搞其他的。建立知识体系：把自己学习的内容形成博客也好，什么导图也罢，记得把这些零散的内容，整理成自己的知识。别抱有侥幸心理：别裸面，如果自己有整理的还是多看一下，多准备准备。大厂的面试会挖到你最深的部分，不要觉得只背一些面试题就是 ok的，题是背不完的。临时抱佛脚基本上过不了关。如果你是靠背面试题进去的，那么你厉害，佩服。隔一段时间就去面试吧：不要学我，待一家公司三年多，中途都没有出去面过，出去面面才知道，哪些是需要去补充的。有些问题可能答案这些不是太全面，需要你自己去动手。希望这篇文章对你有帮助，哪怕只有一个点，都是值得的。如果其中有一些点你不了解，那么你是时候要去补充了。
